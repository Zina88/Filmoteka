function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},l={},i=n.parcelRequired7c6;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in l){var n=l[e];delete l[e];var i={id:e,exports:{}};return t[e]=i,n.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,n){l[e]=n},n.parcelRequired7c6=i);var r,a={};a=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)};var o,s={},c={};o="object"==typeof n&&n&&n.Object===Object&&n;var d="object"==typeof self&&self&&self.Object===Object&&self,p=o||d||Function("return this")();s=function(){return c.Date.now()};var y={},u={},f={},v=/\s/;f=function(e){for(var n=e.length;n--&&v.test(e.charAt(n)););return n};var g=/^\s+/;u=function(e){return e?e.slice(0,f(e)+1).replace(g,""):e};var m,T={},$={};m=(c=p).Symbol;var h={},L=Object.prototype,M=L.hasOwnProperty,x=L.toString,S=m?m.toStringTag:void 0;h=function(e){var n=M.call(e,S),t=e[S];try{e[S]=void 0;var l=!0}catch(e){}var i=x.call(e);return l&&(n?e[S]=t:delete e[S]),i};var b={},E=Object.prototype.toString;b=function(e){return E.call(e)};var H=m?m.toStringTag:void 0;$=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":H&&H in Object(e)?h(e):b(e)};var w={};w=function(e){return null!=e&&"object"==typeof e};T=function(e){return"symbol"==typeof e||w(e)&&"[object Symbol]"==$(e)};var q=/^[-+]0x[0-9a-f]+$/i,O=/^0b[01]+$/i,k=/^0o[0-7]+$/i,_=parseInt;y=function(e){if("number"==typeof e)return e;if(T(e))return NaN;if(a(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=a(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=u(e);var t=O.test(e);return t||k.test(e)?_(e.slice(2),t?2:8):q.test(e)?NaN:+e};var j=Math.max,A=Math.min;r=function(e,n,t){var l,i,r,o,c,d,p=0,u=!1,f=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(n){var t=l,r=i;return l=i=void 0,p=n,o=e.apply(r,t)}function m(e){return p=e,c=setTimeout($,n),u?g(e):o}function T(e){var t=e-d;return void 0===d||t>=n||t<0||f&&e-p>=r}function $(){var e=s();if(T(e))return h(e);c=setTimeout($,function(e){var t=n-(e-d);return f?A(t,r-(e-p)):t}(e))}function h(e){return c=void 0,v&&l?g(e):(l=i=void 0,o)}function L(){var e=s(),t=T(e);if(l=arguments,i=this,d=e,t){if(void 0===c)return m(d);if(f)return clearTimeout(c),c=setTimeout($,n),g(d)}return void 0===c&&(c=setTimeout($,n)),o}return n=y(n)||0,a(t)&&(u=!!t.leading,r=(f="maxWait"in t)?j(y(t.maxWait)||0,n):r,v="trailing"in t?!!t.trailing:v),L.cancel=function(){void 0!==c&&clearTimeout(c),p=0,l=d=i=c=void 0},L.flush=function(){return void 0===c?o:h(s())},L};var G=i("gmOeB"),W=i("1koGM"),N=(G=i("gmOeB"),i("2Ea8k"));const D={gallery:document.querySelector(".gallery")};async function I(e){D.gallery.insertAdjacentHTML("beforeend",await B(e))}async function B(e){let n=e.map((async({id:e,title:n,name:t,release_date:l,genre_ids:i,poster_path:r})=>{const a=`https://image.tmdb.org/t/p/w500${r}`,o="https://image.tmdb.org/t/p/w500/AcKVlWaNVVVFQwro3nLXqPljcYA.jpg",s=await(0,N.default)(i);let c;if(s.length>3)return void(c=`${s.slice(0,3).join(", ")}, ...other`);c=s.join(", ");return`<li class="card-item" id="${e}">\n        <a class="card-link" id="${e}" href="${null!==r?a:o}">\n        <img class="card__image" id="${e}" src="${null!==r?a:o}" alt="${n}">\n        <div class="card-discr">\n        <p class="card-title" id="${e}">${n||t}</p>\n        <ul class="box">\n            <li class="card-genres" id="${e}">${c||"Unknown"}</li>\n            <li class="card-data" id="${e}">${l?l.slice(0,4):"Unknown"}</li>\n        </ul>\n        </div>\n        </a>    \n    </li>`}));return n=await Promise.all(n),n=n.join(""),n}W=i("1koGM");var R=i("8G1wF");const C=document.querySelector("[data-action-previous]"),V=document.querySelector("[data-action-first]"),F=document.querySelector("[data-action-second]"),Y=document.querySelector("[data-action-third]"),K=document.querySelector(".left-wing-dots");V.style.display="none",K.style.display="none";const U=document.querySelector("[data-action-last-third]"),P=document.querySelector("[data-action-last-second]"),J=document.querySelector("[data-action-last]"),Q=document.querySelector("[data-action-last] > p"),z=document.querySelector("[data-action-next]"),X=document.querySelector(".right-wing-dots"),Z=document.querySelector(".pages-container"),ee=new(0,G.default),ne=document.querySelector(".gallery");let te=1,le=null;function ie(e,n){let t="";return 1===e?(t=`<div class="current-page"><p>${e}</p></div>`,C.style.display="none",V.style.display="none",z.style.display="inline-flex",J.style.display="inline-flex",F.style.display="none",Y.style.display="none",U.style.display="inline-flex",P.style.display="inline-flex",U.innerHTML=`<p>${e+1}</p>`,P.innerHTML=`<p>${e+2}</p>`,K.style.display="none",X.style.display="inline-block"):2===e?(t=`<div class="current-page"><p>${e}</p></div>`,ce(),F.style.display="none",Y.style.display="none",U.style.display="inline-flex",P.style.display="inline-flex",U.innerHTML=`<p>${e+1}</p>`,P.innerHTML=`<p>${e+2}</p>`,K.style.display="none",X.style.display="inline-block"):3===e?(t=`<div class="current-page"><p>${e}</p></div>`,ce(),F.style.display="none",Y.style.display="inline-flex",F.innerHTML=`<p>${e-2}</p>`,Y.innerHTML=`<p>${e-1}</p>`,U.style.display="inline-flex",P.style.display="inline-flex",U.innerHTML=`<p>${e+1}</p>`,P.innerHTML=`<p>${e+2}</p>`,K.style.display="none",X.style.display="inline-block"):4===e?(t=`<div class="current-page"><p>${e}</p></div>`,ce(),F.style.display="inline-flex",Y.style.display="inline-flex",F.innerHTML=`<p>${e-2}</p>`,Y.innerHTML=`<p>${e-1}</p>`,U.style.display="inline-flex",P.style.display="inline-flex",U.innerHTML=`<p>${e+1}</p>`,P.innerHTML=`<p>${e+2}</p>`,K.style.display="none",X.style.display="inline-block"):e===n?(t=`<div class="current-page"><p>${e}</p></div>`,C.style.display="inline-flex",V.style.display="inline-flex",z.style.display="none",J.style.display="none",F.style.display="inline-flex",Y.style.display="inline-flex",F.innerHTML=`<p>${e-2}</p>`,Y.innerHTML=`<p>${e-1}</p>`,U.style.display="none",P.style.display="none",U.innerHTML=`<p>${e+1}</p>`,P.innerHTML=`<p>${e+2}</p>`,K.style.display="inline-block",X.style.display="none"):e===n-1?(t=`<div class="current-page"><p>${e}</p></div>`,ce(),F.style.display="inline-flex",Y.style.display="inline-flex",F.innerHTML=`<p>${e-2}</p>`,Y.innerHTML=`<p>${e-1}</p>`,U.style.display="none",P.style.display="none",U.innerHTML=`<p>${e+1}</p>`,P.innerHTML=`<p>${e+2}</p>`,K.style.display="inline-block",X.style.display="none"):e===n-2?(t=`<div class="current-page"><p>${e}</p></div>`,ce(),F.style.display="inline-flex",Y.style.display="inline-flex",F.innerHTML=`<p>${e-2}</p>`,Y.innerHTML=`<p>${e-1}</p>`,U.style.display="inline-flex",P.style.display="none",U.innerHTML=`<p>${e+1}</p>`,P.innerHTML=`<p>${e+2}</p>`,K.style.display="inline-block",X.style.display="none"):e===n-3?(t=`<div class="current-page"><p>${e}</p></div>`,ce(),F.style.display="inline-flex",Y.style.display="inline-flex",F.innerHTML=`<p>${e-2}</p>`,Y.innerHTML=`<p>${e-1}</p>`,U.style.display="inline-flex",P.style.display="inline-flex",U.innerHTML=`<p>${e+1}</p>`,P.innerHTML=`<p>${e+2}</p>`,K.style.display="inline-block",X.style.display="none"):(t=`<div class="current-page"><p>${e}</p></div>`,ce(),F.style.display="inline-flex",Y.style.display="inline-flex",F.innerHTML=`<p>${e-2}</p>`,Y.innerHTML=`<p>${e-1}</p>`,U.style.display="inline-flex",P.style.display="inline-flex",U.innerHTML=`<p>${e+1}</p>`,P.innerHTML=`<p>${e+2}</p>`,K.style.display="inline-block",X.style.display="inline-block"),t}const re=(e,n)=>{te=e,le=n,Z.innerHTML=ie(e,n),Q.innerHTML=n};async function ae(e){let n=null;n=ee.query?await ee.moviesBySearch(e):await ee.popularMovies(e);let t=n.results;t=n.results,(0,W.default)(R.STORAGE_KEY_MOVIES,t),re(e,n.total_pages),ne.innerHTML=await B(t)}function oe(){te++,ae(te)}function se(){te--,ae(te)}function ce(){z.style.display="inline-flex",C.style.display="inline-flex",V.style.display="inline-flex",J.style.display="inline-flex"}ae(te),z.addEventListener("click",oe),C.addEventListener("click",se),V.addEventListener("click",(function(){te=1,ae(te)})),J.addEventListener("click",(function(){te=le,ae(le)})),Y.addEventListener("click",se),F.addEventListener("click",(function(){te-=2,ae(te)})),U.addEventListener("click",oe),P.addEventListener("click",(function(){te+=2,ae(te)}));R=i("8G1wF");const de={errorEl:document.querySelector(".error")};function pe(e){de.errorEl.textContent=e,de.errorEl.classList.remove("visually-hidden"),setTimeout((()=>{de.errorEl.classList.add("visually-hidden")}),2e3)}const ye={searchForm:document.querySelector("#search-form"),gallery:document.querySelector(".gallery"),input:document.querySelector(".search_input")};ye.searchForm.addEventListener("submit",(async function(e){e.preventDefault(),ye.gallery.innerHTML="";const n=e.currentTarget.elements.searchQuery.value.trim();if(""===n)return pe("Please, enter your search query."),void ae(1);ue.query=n;try{const e=await ue.moviesBySearch(),n=e.results;if(0===n.length)return void pe("Search result is not successful. Enter the correct movie name.");re(e.page,e.total_pages),I(n),(0,W.default)(R.STORAGE_KEY_MOVIES,n)}catch(e){console.log(e)}ue.query=""}));const ue=new(0,G.default);ye.input.addEventListener("input",e(r)((function(){if(""===ye.input.value.trim())return ae(1),void pe("Please, enter your search query.")}),R.DEBOUNCE_DELAY)),i("6HA5D"),i("gjiCh"),i("glGLq"),i("bTcpz"),i("2Ea8k"),i("cbBSt"),i("8MDAD"),i("m4NlG"),i("gjiCh"),i("1koGM"),i("glGLq"),i("bTcpz");R=i("8G1wF");var fe=i("cbBSt"),ve=i("8MDAD");i("1koGM");const ge={addToWatch:document.querySelector("#watchedModalBtn"),addToQueue:document.querySelector("#queueModalBtn")};ge.addToWatch.addEventListener("click",(function(e){ge.addToWatch.classList.add("is-active__Btn"),console.dir(e.currentTarget),me=(0,fe.default)(R.STORAGE_KEY_MOVIEID),Te=(0,ve.default)(R.STORAGE_KEY_MOVIES,me),void($e.includes(n)?(console.log("уже есть в просмотренных"),ge.addToWatch.textContent="Remove from watched"):(console.log("нет такого в просмотренных"),ge.addToWatch.textContent="Add to watched",console.log(me),$e.push(me),localStorage.setItem("arrayAddToWatch",JSON.stringify($e)),console.log($e),ge.addToWatch.textContent="Remove from watched")),"Remove from watched"===ge.addToWatch.textContent&&function(){const e=$e.indexOf(me);$e.slice(e,1),localStorage.setItem("arrayAddToWatch",JSON.stringify($e))}();var n}));(0,fe.default)(R.STORAGE_KEY_MOVIES);let me="",Te="",$e=[];null!==localStorage.getItem("arrayAddToWatch")&&($e=localStorage.getItem("arrayAddToWatch"),$e=JSON.parse($e)),console.log($e);
//# sourceMappingURL=index.87f085f1.js.map
